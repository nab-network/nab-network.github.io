<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAB Professional Network - Colleagues</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ed0100;
            --secondary-color: white;
            --background-color: #202120;
            --text-color: white;
            --border-radius: 8px;
            --box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: black;
            border-radius: var(--border-radius);
            margin: 20px;
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .search-bar {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .search-bar input {
            padding: 8px 12px;
            border-radius: var(--border-radius);
            border: 1px solid #ccc;
            outline: none;
        }
        .profile-link-button {
            display: block;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--primary-color);
            flex-shrink: 0;
        }
        .nav-profile-picture {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .colleagues-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px;
        }
        .colleague-card {
            background: black;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            text-align: center;
            color: var(--text-color);
        }
        .colleague-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
        }
        .colleague-card h3 {
            margin: 10px 0;
            color: var(--primary-color);
            font-family: 'Arial-Averif', Arial, sans-serif;
        }
        .colleague-card .position {
            color: #666;
            margin-bottom: 15px;
        }
        .colleague-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: var(--secondary-color);
            color: var(--primary-color);
        }
        .btn-secondary {
            background-color: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 12px 24px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            color: var(--text-color);
        }
        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        .close:hover {
            color: var(--primary-color);
        }
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 15px;
            }
            .colleagues-grid {
                grid-template-columns: 1fr;
            }
        }
        /* From Uiverse.io by LightAndy1 */
        .group {
            display: flex;
            line-height: 28px;
            align-items: center;
            position: relative;
            max-width: 190px;
        }
        .input {
            font-family: "Montserrat", sans-serif;
            width: 100%;
            height: 45px;
            padding-left: 2.5rem;
            box-shadow: 0 0 0 1.5px #202120, 0 0 25px -17px #000;
            border: 0;
            border-radius: 12px;
            background-color: #202121;
            outline: none;
            color: #bdbecb;
            transition: all 0.25s cubic-bezier(0.19, 1, 0.22, 1);
            cursor: text;
            z-index: 0;
        }
        .input::placeholder {
            color: #bdbecb;
        }
        .input:hover {
            box-shadow: 0 0 0 2.5px #202122, 0px 0px 25px -15px #000;
        }
        .input:active {
            transform: scale(0.95);
        }
        .input:focus {
            box-shadow: 0 0 0 2.5px #2f303d;
        }
        .search-icon {
            position: absolute;
            left: 1rem;
            fill: #bdbecb;
            width: 1rem;
            height: 1rem;
            pointer-events: none;
            z-index: 1;
        }
        /* From Uiverse.io by andrew-demchenk0 */
        .card {
            --main-color: #000;
            --submain-color: #78858F;
            --bg-color: #fff;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            position: relative;
            width: 300px;
            height: 384px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-radius: 20px;
            background: var(--bg-color);
        }

        .card__img {
            height: 192px;
            width: 100%;
        }

        .card__img svg {
            height: 100%;
            border-radius: 20px 20px 0 0;
        }

        .card__avatar {
            position: absolute;
            width: 114px;
            height: 114px;
            background: var(--bg-color);
            border-radius: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            top: calc(50% - 57px);
        }

        .card__avatar svg {
            width: 100px;
            height: 100px;
        }

        .card__title {
            margin-top: 60px;
            font-weight: 500;
            font-size: 18px;
            color: var(--main-color);
        }

        .card__subtitle {
            margin-top: 10px;
            font-weight: 400;
            font-size: 15px;
            color: var(--submain-color);
        }

        .card__btn {
            margin-top: 15px;
            width: 76px;
            height: 31px;
            border: 2px solid var(--main-color);
            border-radius: 4px;
            font-weight: 700;
            font-size: 11px;
            color: var(--main-color);
            background: var(--bg-color);
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .card__btn-solid {
            background: var(--main-color);
            color: var(--bg-color);
        }

        .card__btn:hover {
            background: var(--main-color);
            color: var(--bg-color);
        }

        .card__btn-solid:hover {
            background: var(--bg-color);
            color: var(--main-color);
        }
    </style>
</head>
<body>

<div class="header-container">
    <div class="logo">
        <img src="logo.png" alt="NAB Logo" style="width: 80px; height: auto;">
        <div>
            <h1 style="color: #ed0100; margin: 0; font-size: 28px;">NAB Professional Network</h1>
            <p style="color: white; margin: 5px 0 0; font-size: 14px;">Search for your colleagues</p>
        </div>
    </div>

    <!-- Search bar and profile picture in the same flex container -->
    <div style="display: flex; align-items: center; gap: 10px;">
        <div class="group">
            <svg viewBox="0 0 24 24" aria-hidden="true" class="search-icon">
                <g>
                    <path
                            d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"
                    ></path>
                </g>
            </svg>
            <input
                    id="query"
                    class="input"
                    type="search"
                    placeholder="Search Your Colleagues"
                    name="searchbar"
            />
        </div>
        <a href="profile.html" class="profile-link-button">
            <img id="nav-profile-preview" src="https://via.placeholder.com/50" alt="My Profile" class="nav-profile-picture">
        </a>
    </div>
</div>

<div class="colleagues-grid" id="colleagues-grid">
    <div class="colleague-card">
        <img src="https://via.placeholder.com/100" alt="Colleague Photo" class="colleague-photo">
        <h3 style="color: white">John Doe</h3>
        <p class="position">Senior Developer</p>
        <div class="skills">
            <span class="skill-tag">Python, </span>
            <span class="skill-tag">JavaScript, </span>
            <span class="skill-tag">React</span>
        </div>
        <div class="colleague-actions">
            <button class="btn-primary" onclick="viewProfile('john.doe@nab.com.au')">View Profile</button>
            <button class="btn-secondary" onclick="requestCertificationAccess('john.doe@nab.com.au')">Request Certifications</button>
        </div>
    </div>
</div>

<div id="profile-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-profile-content"></div>
    </div>
</div>

<script type="module" src="script.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const navProfilePreview = document.getElementById('nav-profile-preview');
        const profilePicture = localStorage.getItem('profilePicture');
        if (profilePicture) {
            navProfilePreview.src = profilePicture;
        }

        // Handle profile picture click
        navProfilePreview.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'profile-preview.html';
        });

        // Handle view profile click
        window.viewProfile = function(colleagueId) {
            window.location.href = `colleague-profile.html?id=${encodeURIComponent(colleagueId)}`;
        };

        // Handle search
        const searchInput = document.getElementById('query');
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const searchQuery = this.value.trim();
                if (searchQuery) {
                    window.location.href = `search-results.html?q=${encodeURIComponent(searchQuery)}`;
                }
            }
        });

        // Handle certification access request
        window.requestCertificationAccess = function(colleagueId) {
            alert('Certification access request sent to the colleague');
        };
    });
</script>
<script>
    fetch('/api/employees')
        .then(res => res.json())
        .then(data => {
            const container = document.querySelector('.colleagues-grid');
            data.forEach(emp => {
                const card = document.createElement('div');
                card.className = 'colleague-card';
                card.innerHTML = `
                    <img class="colleague-photo" src="uploads/${emp.ProfilePicture}" alt="${emp.FullName}">
                    <h3>${emp.FullName}</h3>
                    <p class="position">${emp.PositionInCompany}</p>
                    <div class="colleague-actions">
                        <a class="btn-primary" href="colleague-profile.html?id=${emp.EmployeeID}">View Profile</a>
                    </div>
                `;
                container.appendChild(card);
            });
        });
</script>

</body>
</html>
